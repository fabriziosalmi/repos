<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>fabriziosalmi - code & sound</title>
    <meta name="description" content="Developer, sound designer, creative coder. Building the future with code and beats.">
    <meta name="referrer" content="no-referrer">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
    <!-- Performance & Security -->
    <link rel="dns-prefetch" href="https://cdn.jsdelivr.net">
    <link rel="preconnect" href="https://cdn.jsdelivr.net" crossorigin>
    
    <!-- Favicon -->
    <link rel="icon" href="https://github.com/fabriziosalmi.png" crossorigin="anonymous">
    
    <!-- Icons with defer -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css" media="print" onload="this.media='all'">
    <noscript><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css"></noscript>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --neon-cyan: #00ffff;
            --neon-magenta: #ff00ff;
            --neon-yellow: #ffff00;
            --deep-space: #0a0a0f;
            --cosmic-purple: #1a0a2e;
            --electric-blue: #0066ff;
            --plasma-pink: #ff0080;
        }

        html {
            scroll-behavior: smooth;
            cursor: none;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', sans-serif;
            background: radial-gradient(ellipse at top, var(--cosmic-purple), var(--deep-space));
            color: #fff;
            overflow-x: hidden;
            min-height: 100vh;
            position: relative;
        }

        /* Custom Cursor */
        .cursor {
            width: 20px;
            height: 20px;
            border: 2px solid var(--neon-cyan);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9999;
            transition: all 0.1s ease;
            mix-blend-mode: difference;
        }

        .cursor-trail {
            width: 6px;
            height: 6px;
            background: var(--neon-cyan);
            border-radius: 50%;
            position: fixed;
            pointer-events: none;
            z-index: 9998;
            opacity: 0.6;
        }

        /* Animated Background */
        .stars {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
        }

        .star {
            position: absolute;
            width: 2px;
            height: 2px;
            background: white;
            border-radius: 50%;
            animation: twinkle 3s infinite;
        }

        @keyframes twinkle {
            0%, 100% { opacity: 0.3; }
            50% { opacity: 1; }
        }

        /* Navigation */
        nav {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            padding: 1.5rem 5%;
            background: rgba(10, 10, 15, 0.8);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(0, 255, 255, 0.1);
            z-index: 1000;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .logo {
            font-size: 1.5rem;
            font-weight: 900;
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            letter-spacing: -1px;
        }

        .nav-links {
            display: flex;
            gap: 2rem;
            list-style: none;
        }

        .nav-links a {
            color: #fff;
            text-decoration: none;
            font-weight: 500;
            transition: all 0.3s;
            position: relative;
        }

        .nav-links a:hover {
            color: var(--neon-cyan);
        }

        .nav-links a::after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 0;
            height: 2px;
            background: var(--neon-cyan);
            transition: width 0.3s;
        }

        .nav-links a:hover::after {
            width: 100%;
        }

        .audio-toggle {
            background: none;
            border: 2px solid var(--neon-cyan);
            color: var(--neon-cyan);
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .audio-toggle:hover {
            background: var(--neon-cyan);
            color: var(--deep-space);
            box-shadow: 0 0 20px var(--neon-cyan);
        }

        /* Hero Section */
        .hero {
            min-height: 100vh;
            display: flex;
            align-items: center;
            justify-content: center;
            flex-direction: column;
            text-align: center;
            padding: 8rem 5% 4rem;
            position: relative;
            z-index: 1;
        }

        .avatar {
            width: 200px;
            height: 200px;
            border-radius: 50%;
            border: 4px solid transparent;
            background: linear-gradient(var(--deep-space), var(--deep-space)) padding-box,
                        linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta)) border-box;
            margin-bottom: 2rem;
            animation: float 6s ease-in-out infinite;
            box-shadow: 0 0 60px rgba(0, 255, 255, 0.3);
            transition: all 0.5s;
        }

        .avatar:hover {
            transform: scale(1.1) rotate(5deg);
            box-shadow: 0 0 80px rgba(255, 0, 255, 0.5);
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-20px); }
        }

        h1 {
            font-size: clamp(3rem, 8vw, 7rem);
            font-weight: 900;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta), var(--neon-yellow));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
            animation: glow 3s ease-in-out infinite;
        }

        @keyframes glow {
            0%, 100% { filter: drop-shadow(0 0 20px rgba(0, 255, 255, 0.5)); }
            50% { filter: drop-shadow(0 0 40px rgba(255, 0, 255, 0.7)); }
        }

        .tagline {
            font-size: clamp(1.2rem, 3vw, 2rem);
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 3rem;
            font-weight: 300;
        }

        .cta-buttons {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            justify-content: center;
        }

        .btn {
            padding: 1rem 2.5rem;
            border-radius: 50px;
            font-weight: 600;
            text-decoration: none;
            display: inline-flex;
            align-items: center;
            gap: 0.5rem;
            transition: all 0.3s;
            border: 2px solid transparent;
            cursor: pointer;
            position: relative;
            overflow: hidden;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--neon-cyan), var(--electric-blue));
            color: var(--deep-space);
        }

        .btn-primary:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.4);
        }

        .btn-outline {
            border-color: var(--neon-magenta);
            color: var(--neon-magenta);
        }

        .btn-outline:hover {
            background: var(--neon-magenta);
            color: var(--deep-space);
            box-shadow: 0 10px 30px rgba(255, 0, 255, 0.4);
        }

        /* Stats Grid */
        .stats-section {
            padding: 6rem 5%;
            position: relative;
            z-index: 1;
        }

        .section-title {
            text-align: center;
            font-size: clamp(2.5rem, 5vw, 4rem);
            margin-bottom: 4rem;
            background: linear-gradient(135deg, #fff, var(--neon-cyan));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .stat-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            text-align: center;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .stat-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
            opacity: 0;
            transition: opacity 0.3s;
        }

        .stat-card:hover::before {
            opacity: 0.1;
        }

        .stat-card:hover {
            transform: translateY(-10px);
            border-color: var(--neon-cyan);
            box-shadow: 0 20px 40px rgba(0, 255, 255, 0.2);
        }

        .stat-icon {
            font-size: 3rem;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, var(--neon-cyan), var(--neon-magenta));
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .stat-value {
            font-size: 2.5rem;
            font-weight: 900;
            margin-bottom: 0.5rem;
            color: var(--neon-cyan);
        }

        .stat-label {
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* Repositories */
        .repos-section {
            padding: 6rem 5%;
            background: linear-gradient(180deg, transparent, rgba(0, 255, 255, 0.02));
            position: relative;
            z-index: 1;
        }

        .repos-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(350px, 1fr));
            gap: 2rem;
            max-width: 1400px;
            margin: 0 auto;
        }

        .repo-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 2rem;
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .repo-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: linear-gradient(180deg, var(--neon-cyan), var(--neon-magenta));
            transform: scaleY(0);
            transition: transform 0.3s;
        }

        .repo-card:hover::before {
            transform: scaleY(1);
        }

        .repo-card:hover {
            transform: translateX(10px);
            border-color: var(--neon-cyan);
            box-shadow: 0 10px 30px rgba(0, 255, 255, 0.2);
        }

        .repo-name {
            font-size: 1.5rem;
            font-weight: 700;
            margin-bottom: 1rem;
            color: var(--neon-cyan);
        }

        .repo-desc {
            color: rgba(255, 255, 255, 0.7);
            margin-bottom: 1.5rem;
            line-height: 1.6;
        }

        .repo-stats {
            display: flex;
            gap: 1.5rem;
            flex-wrap: wrap;
            margin-bottom: 1rem;
        }

        .repo-stat {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            color: rgba(255, 255, 255, 0.5);
            font-size: 0.9rem;
        }

        .repo-stat i {
            color: var(--neon-magenta);
        }

        /* Footer */
        footer {
            padding: 4rem 5%;
            text-align: center;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            position: relative;
            z-index: 1;
        }

        .footer-links {
            display: flex;
            justify-content: center;
            gap: 2rem;
            margin-bottom: 2rem;
        }

        .footer-links a {
            color: rgba(255, 255, 255, 0.6);
            text-decoration: none;
            font-size: 1.5rem;
            transition: all 0.3s;
        }

        .footer-links a:hover {
            color: var(--neon-cyan);
            transform: translateY(-3px);
        }

        /* Loading */
        .loading {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: var(--deep-space);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 10000;
            transition: opacity 0.5s;
        }

        .loading.hidden {
            opacity: 0;
            pointer-events: none;
        }

        .loader {
            width: 80px;
            height: 80px;
            border: 4px solid rgba(0, 255, 255, 0.1);
            border-top-color: var(--neon-cyan);
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            to { transform: rotate(360deg); }
        }

        /* Responsive */
        @media (max-width: 768px) {
            nav {
                flex-direction: column;
                gap: 1rem;
            }

            .nav-links {
                flex-direction: column;
                gap: 1rem;
                text-align: center;
            }

            .stats-grid, .repos-grid {
                grid-template-columns: 1fr;
            }

            .cta-buttons {
                flex-direction: column;
            }
        }

        /* Scroll indicator */
        .scroll-indicator {
            position: absolute;
            bottom: 2rem;
            left: 50%;
            transform: translateX(-50%);
            animation: bounce 2s infinite;
        }

        @keyframes bounce {
            0%, 100% { transform: translateX(-50%) translateY(0); }
            50% { transform: translateX(-50%) translateY(10px); }
        }

        .scroll-indicator i {
            font-size: 2rem;
            color: var(--neon-cyan);
        }

        /* Ambient Effects */
        .ambient-orb {
            position: fixed;
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
            filter: blur(80px);
            opacity: 0;
            transition: opacity 2s ease;
        }

        .ambient-orb.active {
            opacity: 0.15;
        }

        /* Aurora Effect */
        .aurora {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            background: linear-gradient(
                45deg,
                transparent 0%,
                rgba(0, 255, 255, 0.05) 25%,
                transparent 50%,
                rgba(255, 0, 255, 0.05) 75%,
                transparent 100%
            );
            background-size: 200% 200%;
            animation: aurora-flow 20s ease infinite;
            transition: opacity 3s ease;
        }

        .aurora.active {
            opacity: 1;
        }

        @keyframes aurora-flow {
            0%, 100% { background-position: 0% 0%; }
            50% { background-position: 100% 100%; }
        }

        /* Meteor Effect */
        .meteor {
            position: fixed;
            width: 2px;
            height: 80px;
            background: linear-gradient(to bottom, rgba(255, 255, 255, 0), rgba(0, 255, 255, 0.8));
            border-radius: 50%;
            pointer-events: none;
            z-index: 1;
            animation: meteor-fall 2s linear;
        }

        @keyframes meteor-fall {
            0% {
                opacity: 1;
                transform: translateY(0) translateX(0) rotate(45deg);
            }
            100% {
                opacity: 0;
                transform: translateY(100vh) translateX(50vw) rotate(45deg);
            }
        }

        /* Pulse Ring Effect */
        .pulse-ring {
            position: fixed;
            border: 2px solid var(--neon-cyan);
            border-radius: 50%;
            pointer-events: none;
            z-index: 0;
            opacity: 0;
            animation: pulse-expand 3s ease-out;
        }

        @keyframes pulse-expand {
            0% {
                width: 50px;
                height: 50px;
                opacity: 0.8;
            }
            100% {
                width: 400px;
                height: 400px;
                opacity: 0;
            }
        }

        /* Performance Optimizations */
        * {
            will-change: auto;
        }

        .stat-card, .repo-card, .btn {
            will-change: transform;
        }

        /* Reduce motion for accessibility */
        @media (prefers-reduced-motion: reduce) {
            *, *::before, *::after {
                animation-duration: 0.01ms !important;
                animation-iteration-count: 1 !important;
                transition-duration: 0.01ms !important;
            }
        }

        /* Layer promotion for performance */
        .cursor, .cursor-trail, .stars, .aurora, .ambient-orb {
            transform: translateZ(0);
            backface-visibility: hidden;
        }
    </style>
</head>
<body>
    <!-- Loading Screen -->
    <div class="loading" id="loading">
        <div class="loader"></div>
    </div>

    <!-- Custom Cursor -->
    <div class="cursor" id="cursor"></div>

    <!-- Stars Background -->
    <div class="stars" id="stars"></div>

    <!-- Aurora Effect -->
    <div class="aurora" id="aurora"></div>

    <!-- Ambient Orbs Container -->
    <div id="ambientOrbs"></div>

    <!-- Navigation -->
    <nav>
        <div class="logo">fabriziosalmi</div>
        <ul class="nav-links">
            <li><a href="#home">Home</a></li>
            <li><a href="#stats">Stats</a></li>
            <li><a href="#repos">Projects</a></li>
            <li><a href="https://github.com/fabriziosalmi" target="_blank">
                <i class="bi bi-github"></i> GitHub
            </a></li>
        </ul>
        <button class="audio-toggle" id="audioToggle" title="Toggle Audio">
            <i class="bi bi-volume-up-fill" id="audioIcon"></i>
        </button>
    </nav>

    <!-- Hero Section -->
    <section class="hero" id="home">
        <img src="https://github.com/fabriziosalmi.png" alt="fabriziosalmi" class="avatar">
        <h1>fabriziosalmi</h1>
        <p class="tagline">code, sound, creativity</p>
        <div class="cta-buttons">
            <a href="https://github.com/fabriziosalmi" target="_blank" class="btn btn-primary">
                <i class="bi bi-github"></i> View GitHub
            </a>
            <a href="#repos" class="btn btn-outline">
                <i class="bi bi-code-slash"></i> Explore Projects
            </a>
        </div>
        <div class="scroll-indicator">
            <i class="bi bi-chevron-down"></i>
        </div>
    </section>

    <!-- Stats Section -->
    <section class="stats-section" id="stats">
        <h2 class="section-title">GitHub Statistics</h2>
        <div class="stats-grid" id="statsGrid">
            <!-- Stats will be loaded here -->
        </div>
    </section>

    <!-- Repositories Section -->
    <section class="repos-section" id="repos">
        <h2 class="section-title">Featured Projects</h2>
        <div class="repos-grid" id="reposGrid">
            <!-- Repos will be loaded here -->
        </div>
    </section>

    <!-- Footer -->
    <footer>
        <div class="footer-links">
            <a href="https://github.com/fabriziosalmi" target="_blank" title="GitHub">
                <i class="bi bi-github"></i>
            </a>
            <a href="https://twitter.com/fabriziosalmi" target="_blank" title="Twitter">
                <i class="bi bi-twitter"></i>
            </a>
            <a href="mailto:fabrizio.salmi@gmail.com" title="Email">
                <i class="bi bi-envelope"></i>
            </a>
        </div>
        <p style="color: rgba(255,255,255,0.4);">¬© 2025 fabriziosalmi - Built with ‚ù§Ô∏è and üéµ</p>
    </footer>

    <script>
        // ===== AUDIO SYSTEM =====
        const AudioContext = window.AudioContext || window.webkitAudioContext;
        let audioContext = null;
        let isSoundEnabled = true;
        let isMusicEnabled = true;
        let masterGain = null;
        let musicGain = null;
        let drumLoop = null;
        let vinylCrackle = null;
        let dubDelay = null;
        let glitchInterval = null;

        function initAudio() {
            if (!audioContext) {
                audioContext = new AudioContext();
                masterGain = audioContext.createGain();
                masterGain.gain.value = 0.25;
                
                // Dub delay
                dubDelay = audioContext.createDelay(2.0);
                dubDelay.delayTime.value = 0.375;
                const feedback = audioContext.createGain();
                feedback.gain.value = 0.35;
                const delayFilter = audioContext.createBiquadFilter();
                delayFilter.type = 'lowpass';
                delayFilter.frequency.value = 2800;
                
                dubDelay.connect(feedback);
                feedback.connect(delayFilter);
                delayFilter.connect(dubDelay);
                delayFilter.connect(masterGain);
                
                musicGain = audioContext.createGain();
                musicGain.gain.value = 0.08;
                musicGain.connect(masterGain);
                masterGain.connect(audioContext.destination);

                if (isMusicEnabled) {
                    startDrumNBass();
                    createVinylCrackle();
                    startGlitchEffects();
                }
            }
        }

        function createVinylCrackle() {
            const bufferSize = audioContext.sampleRate * 0.5;
            const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
            const data = buffer.getChannelData(0);
            
            for (let i = 0; i < bufferSize; i++) {
                data[i] = (Math.random() - 0.5) * 0.015;
            }
            
            vinylCrackle = audioContext.createBufferSource();
            vinylCrackle.buffer = buffer;
            vinylCrackle.loop = true;
            
            const crackleGain = audioContext.createGain();
            crackleGain.gain.value = 0.003;
            const crackleFilter = audioContext.createBiquadFilter();
            crackleFilter.type = 'highpass';
            crackleFilter.frequency.value = 3000;
            
            vinylCrackle.connect(crackleFilter);
            crackleFilter.connect(crackleGain);
            crackleGain.connect(masterGain);
            vinylCrackle.start();
        }

        function startDrumNBass() {
            const bpm = 174;
            const beatDuration = 60 / bpm;
            let beatCount = 0;
            
            function scheduleDrums() {
                const now = audioContext.currentTime;
                
                if (beatCount % 4 === 0 || beatCount % 4 === 2) {
                    scheduleKick(now + 0.1);
                }
                
                if (beatCount % 4 === 1 || beatCount % 4 === 3) {
                    scheduleSnare(now + 0.1);
                }
                
                if (Math.random() > 0.3) {
                    scheduleHihat(now + 0.1, Math.random() > 0.5);
                }
                
                if (beatCount % 2 === 0 && Math.random() > 0.2) {
                    scheduleBass(now + 0.1, beatCount);
                }
                
                beatCount++;
            }
            
            drumLoop = setInterval(scheduleDrums, beatDuration * 250);
        }

        function scheduleKick(time) {
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.type = 'sine';
            osc.frequency.setValueAtTime(150, time);
            osc.frequency.exponentialRampToValueAtTime(40, time + 0.5);
            gain.gain.setValueAtTime(0.4, time);
            gain.gain.exponentialRampToValueAtTime(0.01, time + 0.5);
            
            osc.connect(gain);
            gain.connect(musicGain);
            osc.start(time);
            osc.stop(time + 0.5);
        }

        function scheduleSnare(time) {
            const bufferSize = audioContext.sampleRate * 0.2;
            const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
            const data = buffer.getChannelData(0);
            
            for (let i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            
            const noise = audioContext.createBufferSource();
            noise.buffer = buffer;
            const filter = audioContext.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 1000;
            const gain = audioContext.createGain();
            gain.gain.setValueAtTime(0.15, time);
            gain.gain.exponentialRampToValueAtTime(0.01, time + 0.2);
            
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(musicGain);
            noise.start(time);
            noise.stop(time + 0.2);
        }

        function scheduleHihat(time, open) {
            const bufferSize = audioContext.sampleRate * (open ? 0.3 : 0.05);
            const buffer = audioContext.createBuffer(1, bufferSize, audioContext.sampleRate);
            const data = buffer.getChannelData(0);
            
            for (let i = 0; i < bufferSize; i++) {
                data[i] = Math.random() * 2 - 1;
            }
            
            const noise = audioContext.createBufferSource();
            noise.buffer = buffer;
            const filter = audioContext.createBiquadFilter();
            filter.type = 'highpass';
            filter.frequency.value = 7000;
            const gain = audioContext.createGain();
            gain.gain.setValueAtTime(open ? 0.06 : 0.04, time);
            gain.gain.exponentialRampToValueAtTime(0.01, time + bufferSize / audioContext.sampleRate);
            
            noise.connect(filter);
            filter.connect(gain);
            gain.connect(musicGain);
            noise.start(time);
            noise.stop(time + bufferSize / audioContext.sampleRate);
        }

        function scheduleBass(time, beatCount) {
            const frequencies = [55, 65, 73, 82];
            const freq = frequencies[beatCount % 4];
            
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            const filter = audioContext.createBiquadFilter();
            
            osc.type = 'sawtooth';
            osc.frequency.value = freq;
            filter.type = 'lowpass';
            filter.frequency.setValueAtTime(800, time);
            filter.frequency.exponentialRampToValueAtTime(200, time + 0.3);
            filter.Q.value = 8;
            gain.gain.setValueAtTime(0.12, time);
            gain.gain.exponentialRampToValueAtTime(0.01, time + 0.5);
            
            osc.connect(filter);
            filter.connect(gain);
            gain.connect(musicGain);
            gain.connect(dubDelay);
            osc.start(time);
            osc.stop(time + 0.5);
        }

        function startGlitchEffects() {
            glitchInterval = setInterval(() => {
                if (!isMusicEnabled || Math.random() > 0.15) return;
                
                const now = audioContext.currentTime;
                const pitchOsc = audioContext.createOscillator();
                const pitchGain = audioContext.createGain();
                pitchOsc.frequency.setValueAtTime(Math.random() * 3000 + 500, now);
                pitchGain.gain.setValueAtTime(0.08, now);
                pitchGain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                pitchOsc.connect(pitchGain);
                pitchGain.connect(masterGain);
                pitchOsc.start(now);
                pitchOsc.stop(now + 0.1);
            }, 3000);
        }

        function playSound(type) {
            if (!isSoundEnabled || !audioContext) return;
            
            const now = audioContext.currentTime;
            const osc = audioContext.createOscillator();
            const gain = audioContext.createGain();
            
            osc.connect(gain);
            gain.connect(masterGain);
            
            switch(type) {
                case 'hover':
                    osc.type = 'triangle';
                    osc.frequency.setValueAtTime(800, now);
                    osc.frequency.exponentialRampToValueAtTime(1200, now + 0.05);
                    gain.gain.setValueAtTime(0.08, now);
                    gain.gain.exponentialRampToValueAtTime(0.01, now + 0.05);
                    osc.start(now);
                    osc.stop(now + 0.05);
                    break;
                    
                case 'click':
                    osc.frequency.setValueAtTime(600, now);
                    osc.frequency.exponentialRampToValueAtTime(200, now + 0.1);
                    gain.gain.setValueAtTime(0.12, now);
                    gain.gain.exponentialRampToValueAtTime(0.01, now + 0.1);
                    osc.start(now);
                    osc.stop(now + 0.1);
                    break;
            }
        }

        // ===== CUSTOM CURSOR =====
        const cursor = document.getElementById('cursor');
        let mouseX = 0, mouseY = 0;
        let cursorX = 0, cursorY = 0;
        let trailCounter = 0;

        document.addEventListener('mousemove', (e) => {
            mouseX = e.clientX;
            mouseY = e.clientY;
        });

        function animateCursor() {
            cursorX += (mouseX - cursorX) * 0.2;
            cursorY += (mouseY - cursorY) * 0.2;
            cursor.style.left = cursorX + 'px';
            cursor.style.top = cursorY + 'px';
            
            // Trail effect (ridotto per performance)
            trailCounter++;
            if (trailCounter > 5 && Math.random() > 0.92) {
                const trail = document.createElement('div');
                trail.className = 'cursor-trail';
                trail.style.left = cursorX + 'px';
                trail.style.top = cursorY + 'px';
                document.body.appendChild(trail);
                setTimeout(() => trail.remove(), 500);
                trailCounter = 0;
            }
            
            requestAnimationFrame(animateCursor);
        }
        animateCursor();

        // ===== STARS BACKGROUND =====
        const starsContainer = document.getElementById('stars');
        const starCount = window.innerWidth < 768 ? 100 : 150; // Meno stelle su mobile
        
        for (let i = 0; i < starCount; i++) {
            const star = document.createElement('div');
            star.className = 'star';
            star.style.left = Math.random() * 100 + '%';
            star.style.top = Math.random() * 100 + '%';
            star.style.animationDelay = Math.random() * 3 + 's';
            starsContainer.appendChild(star);
        }

        // ===== DATA LOADING =====
        async function loadData() {
            try {
                const response = await fetch('repositories-data.json');
                const repos = await response.json();
                
                // Calculate stats
                const totalStars = repos.reduce((sum, r) => sum + r.stars, 0);
                const totalForks = repos.reduce((sum, r) => sum + r.forks, 0);
                const totalCommits = repos.reduce((sum, r) => sum + r.commits, 0);
                
                // Display stats
                const statsGrid = document.getElementById('statsGrid');
                statsGrid.innerHTML = `
                    <div class="stat-card">
                        <div class="stat-icon"><i class="bi bi-folder"></i></div>
                        <div class="stat-value">${repos.length}</div>
                        <div class="stat-label">Repositories</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="bi bi-star-fill"></i></div>
                        <div class="stat-value">${totalStars}</div>
                        <div class="stat-label">Total Stars</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="bi bi-diagram-3"></i></div>
                        <div class="stat-value">${totalForks}</div>
                        <div class="stat-label">Total Forks</div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon"><i class="bi bi-git"></i></div>
                        <div class="stat-value">${totalCommits.toLocaleString()}</div>
                        <div class="stat-label">Total Commits</div>
                    </div>
                `;
                
                // Display repos (top 12)
                const reposGrid = document.getElementById('reposGrid');
                const topRepos = repos.sort((a, b) => b.stars - a.stars).slice(0, 12);
                
                reposGrid.innerHTML = topRepos.map(repo => `
                    <div class="repo-card">
                        <h3 class="repo-name">${repo.name}</h3>
                        <p class="repo-desc">${repo.description}</p>
                        <div class="repo-stats">
                            <span class="repo-stat">
                                <i class="bi bi-star-fill"></i> ${repo.stars}
                            </span>
                            <span class="repo-stat">
                                <i class="bi bi-diagram-3"></i> ${repo.forks}
                            </span>
                            <span class="repo-stat">
                                <i class="bi bi-git"></i> ${repo.commits}
                            </span>
                        </div>
                        <a href="${repo.url}" target="_blank" class="btn btn-outline" style="width: 100%; justify-content: center; margin-top: 1rem;">
                            <i class="bi bi-github"></i> View Project
                        </a>
                    </div>
                `).join('');
                
            } catch (error) {
                console.error('Error loading data:', error);
            }
        }

        // ===== AUDIO TOGGLE =====
        const audioToggle = document.getElementById('audioToggle');
        const audioIcon = document.getElementById('audioIcon');
        
        audioToggle.addEventListener('click', () => {
            isSoundEnabled = !isSoundEnabled;
            isMusicEnabled = !isMusicEnabled;
            
            if (isSoundEnabled) {
                audioIcon.className = 'bi bi-volume-up-fill';
                if (!audioContext) {
                    initAudio();
                } else {
                    if (!drumLoop) startDrumNBass();
                    if (!glitchInterval) startGlitchEffects();
                }
            } else {
                audioIcon.className = 'bi bi-volume-mute-fill';
                if (drumLoop) {
                    clearInterval(drumLoop);
                    drumLoop = null;
                }
                if (glitchInterval) {
                    clearInterval(glitchInterval);
                    glitchInterval = null;
                }
                if (vinylCrackle) {
                    vinylCrackle.stop();
                    vinylCrackle = null;
                }
            }
        });

        // ===== HOVER SOUNDS =====
        document.querySelectorAll('a, button, .stat-card, .repo-card').forEach(el => {
            el.addEventListener('mouseenter', () => playSound('hover'));
            el.addEventListener('click', () => playSound('click'));
        });

        // ===== INITIALIZATION =====
        window.addEventListener('load', () => {
            setTimeout(() => {
                document.getElementById('loading').classList.add('hidden');
                loadData();
            }, 1000);
            
            // Init audio on first interaction
            document.addEventListener('click', () => {
                if (!audioContext) initAudio();
            }, { once: true });
        });

        // ===== SMOOTH SCROLL =====
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                const target = document.querySelector(this.getAttribute('href'));
                if (target) {
                    target.scrollIntoView({ behavior: 'smooth', block: 'start' });
                }
            });
        });

        // ===== AMBIENT EFFECTS =====
        
        // Aurora wave effect (ogni 45-60 secondi)
        function triggerAurora() {
            const aurora = document.getElementById('aurora');
            aurora.classList.add('active');
            
            setTimeout(() => {
                aurora.classList.remove('active');
            }, 15000); // Dura 15 secondi
            
            // Prossima aurora tra 45-60 secondi
            const nextAurora = 45000 + Math.random() * 15000;
            setTimeout(triggerAurora, nextAurora);
        }
        
        // Ambient orbs (ogni 30-45 secondi)
        function createAmbientOrb() {
            const orb = document.createElement('div');
            orb.className = 'ambient-orb';
            
            const size = 200 + Math.random() * 300;
            const x = Math.random() * 100;
            const y = Math.random() * 100;
            const colors = ['var(--neon-cyan)', 'var(--neon-magenta)', 'var(--plasma-pink)'];
            const color = colors[Math.floor(Math.random() * colors.length)];
            
            orb.style.cssText = `
                width: ${size}px;
                height: ${size}px;
                left: ${x}%;
                top: ${y}%;
                background: radial-gradient(circle, ${color}, transparent);
            `;
            
            document.getElementById('ambientOrbs').appendChild(orb);
            
            // Fade in
            setTimeout(() => orb.classList.add('active'), 100);
            
            // Movimento lento
            const duration = 20000 + Math.random() * 10000;
            orb.animate([
                { transform: 'translate(0, 0) scale(1)' },
                { transform: `translate(${(Math.random() - 0.5) * 200}px, ${(Math.random() - 0.5) * 200}px) scale(1.2)` }
            ], {
                duration: duration,
                easing: 'ease-in-out',
                iterations: 1
            });
            
            // Remove dopo animazione
            setTimeout(() => {
                orb.classList.remove('active');
                setTimeout(() => orb.remove(), 2000);
            }, duration);
            
            // Prossimo orb tra 30-45 secondi
            const nextOrb = 30000 + Math.random() * 15000;
            setTimeout(createAmbientOrb, nextOrb);
        }
        
        // Meteor shower (ogni 60-90 secondi)
        function createMeteor() {
            const meteor = document.createElement('div');
            meteor.className = 'meteor';
            
            const startX = Math.random() * 100;
            const startY = -10;
            
            meteor.style.left = startX + '%';
            meteor.style.top = startY + '%';
            
            document.body.appendChild(meteor);
            
            setTimeout(() => meteor.remove(), 2000);
        }
        
        function triggerMeteorShower() {
            const meteorCount = 3 + Math.floor(Math.random() * 5);
            
            for (let i = 0; i < meteorCount; i++) {
                setTimeout(() => createMeteor(), i * 300);
            }
            
            // Prossima pioggia tra 60-90 secondi
            const nextShower = 60000 + Math.random() * 30000;
            setTimeout(triggerMeteorShower, nextShower);
        }
        
        // Pulse rings on scroll milestones
        let lastScrollTop = 0;
        let scrollDistance = 0;
        
        function createPulseRing(x, y) {
            const ring = document.createElement('div');
            ring.className = 'pulse-ring';
            ring.style.left = x + 'px';
            ring.style.top = y + 'px';
            document.body.appendChild(ring);
            setTimeout(() => ring.remove(), 3000);
        }
        
        window.addEventListener('scroll', () => {
            const st = window.pageYOffset || document.documentElement.scrollTop;
            scrollDistance += Math.abs(st - lastScrollTop);
            lastScrollTop = st;
            
            // Pulse ring ogni 1000px di scroll
            if (scrollDistance > 1000) {
                const x = window.innerWidth / 2 + (Math.random() - 0.5) * 200;
                const y = window.innerHeight / 2 + window.pageYOffset;
                createPulseRing(x, y);
                scrollDistance = 0;
            }
        }, { passive: true });
        
        // Movimento ambientale delle stelle (parallax leggero)
        const stars = document.querySelectorAll('.star');
        let ticking = false;
        
        window.addEventListener('scroll', () => {
            if (!ticking) {
                window.requestAnimationFrame(() => {
                    const scrolled = window.pageYOffset;
                    stars.forEach((star, i) => {
                        const speed = 0.1 + (i % 5) * 0.02;
                        const yPos = -(scrolled * speed);
                        star.style.transform = `translateY(${yPos}px)`;
                    });
                    ticking = false;
                });
                ticking = true;
            }
        }, { passive: true });
        
        // Avvia effetti ambientali dopo il loading
        setTimeout(() => {
            // Prima aurora dopo 20 secondi
            setTimeout(triggerAurora, 20000);
            
            // Primo orb dopo 15 secondi
            setTimeout(createAmbientOrb, 15000);
            
            // Prima pioggia di meteore dopo 30 secondi
            setTimeout(triggerMeteorShower, 30000);
        }, 2000);
        
        // Performance: Riduce cursor trail su dispositivi lenti
        let fps = 60;
        let lastFrameTime = performance.now();
        
        function measureFPS() {
            const now = performance.now();
            fps = Math.round(1000 / (now - lastFrameTime));
            lastFrameTime = now;
            
            // Se FPS < 30, riduci effetti
            if (fps < 30) {
                document.querySelectorAll('.cursor-trail').forEach(t => t.remove());
            }
            
            requestAnimationFrame(measureFPS);
        }
        measureFPS();
        
        // Preload avatar image per performance
        const avatarImg = new Image();
        avatarImg.src = 'https://github.com/fabriziosalmi.png';
    </script>
</body>
</html>
