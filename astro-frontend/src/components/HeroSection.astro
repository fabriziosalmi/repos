---
import {
    Star,
    GitFork,
    ExternalLink,
    BookOpen,
    ChevronRight,
} from "lucide-react";

interface Props {
    repo: any;
}

const { repo } = Astro.props;

const languageColors: Record<string, string> = {
    Python: "#38bdf8",
    TypeScript: "#3178c6",
    JavaScript: "#f1e05a",
    Go: "#00ADD8",
    Rust: "#dea584",
};

const langColor = languageColors[repo.language] || "#38bdf8";
---

<section
    class="relative w-full min-h-[70vh] flex items-center overflow-hidden pt-20 pb-12"
>
    <!-- Dynamic Background Glow -->
    <div class="absolute inset-0 z-0">
        <div
            class="absolute top-1/2 right-[10%] w-[600px] h-[600px] -translate-y-1/2 rounded-full blur-[160px] opacity-20 transition-colors duration-1000"
            style={`background-color: ${langColor}`}
        >
        </div>
        <div
            class="absolute inset-0 bg-gradient-to-b from-transparent via-background/50 to-background"
        >
        </div>
    </div>

    <!-- Content -->
    <div class="relative z-10 w-full max-w-7xl mx-auto px-6 md:px-12">
        <div class="max-w-4xl animate-fade-in">
            <!-- Breadcrumb / Badge -->
            <div class="flex items-center gap-3 mb-8">
                <span
                    class="inline-flex items-center gap-2 px-4 py-1.5 text-xs font-bold rounded-full bg-primary/10 text-primary border border-primary/20 backdrop-blur-md tracking-wider uppercase"
                >
                    <Star size={14} className="fill-primary" />
                    Featured Project
                </span>
                <span class="w-2 h-2 rounded-full bg-white/20"></span>
                <span
                    class="text-xs font-medium text-textMuted uppercase tracking-widest font-mono"
                >
                    {repo.language || "N/A"}
                </span>
            </div>

            <!-- Repo Name -->
            <h1
                class="text-5xl md:text-8xl font-black text-white mb-6 tracking-tight leading-[1.1] font-display"
            >
                {repo.name}
                <span class="text-primary block md:inline md:ml-2 opacity-50"
                    >.</span
                >
            </h1>

            <!-- Description -->
            <p
                class="text-lg md:text-2xl text-textMuted max-w-2xl mb-10 leading-relaxed font-medium"
            >
                {
                    repo.description ||
                        "Building the future of open source, one commit at a time."
                }
            </p>

            <!-- Stats Row -->
            <div class="flex flex-wrap items-center gap-8 mb-12">
                <div class="flex flex-col">
                    <span
                        class="text-xs font-bold text-textMuted uppercase tracking-widest mb-1"
                        >Stars</span
                    >
                    <div class="flex items-center gap-2">
                        <Star
                            size={20}
                            className="text-yellow-500 fill-yellow-500"
                        />
                        <span class="text-3xl font-bold text-white leading-none"
                            >{repo.stars?.toLocaleString()}</span
                        >
                    </div>
                </div>
                <div class="w-px h-10 bg-white/10 hidden sm:block"></div>
                <div class="flex flex-col">
                    <span
                        class="text-xs font-bold text-textMuted uppercase tracking-widest mb-1"
                        >Forks</span
                    >
                    <div class="flex items-center gap-2">
                        <GitFork size={20} className="text-primary" />
                        <span class="text-3xl font-bold text-white leading-none"
                            >{repo.forks?.toLocaleString()}</span
                        >
                    </div>
                </div>
                {
                    repo.language && (
                        <>
                            <div class="w-px h-10 bg-white/10 hidden sm:block" />
                            <div class="flex flex-col">
                                <span class="text-xs font-bold text-textMuted uppercase tracking-widest mb-1">
                                    Language
                                </span>
                                <div class="flex items-center gap-2">
                                    <span
                                        class="w-4 h-4 rounded-full"
                                        style={`background-color: ${langColor}`}
                                    />
                                    <span class="text-xl font-bold text-white leading-none">
                                        {repo.language}
                                    </span>
                                </div>
                            </div>
                        </>
                    )
                }
            </div>

            <!-- CTA Buttons -->
            <div class="flex flex-wrap gap-4">
                <a
                    href={repo.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="group inline-flex items-center gap-3 px-8 py-4 bg-primary text-background font-bold rounded-xl hover:bg-white hover:scale-105 transition-all duration-300 shadow-xl shadow-primary/20"
                >
                    <ExternalLink size={20} />
                    View on GitHub
                    <ChevronRight
                        size={18}
                        className="group-hover:translate-x-1 transition-transform"
                    />
                </a>
                <a
                    href={`${repo.url}#readme`}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-3 px-8 py-4 bg-white/5 text-white border border-white/10 font-bold rounded-xl hover:bg-white/10 hover:border-white/20 backdrop-blur-md transition-all duration-300"
                >
                    <BookOpen size={20} />
                    Documentation
                </a>
            </div>
        </div>
    </div>
</section>
