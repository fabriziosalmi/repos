---
import { Star, GitFork, ExternalLink, BookOpen } from 'lucide-react';

interface Props {
    repo: any;
}

const { repo } = Astro.props;

const languageColors: Record<string, string> = {
    Python: '#3572A5',
    TypeScript: '#3178c6',
    JavaScript: '#f1e05a',
    Vue: '#41b883',
    HTML: '#e34c26',
    CSS: '#563d7c',
    Shell: '#89e051',
    Dockerfile: '#384d54',
    Go: '#00ADD8',
    Rust: '#dea584',
    Java: '#b07219',
    C: '#555555',
    'C++': '#f34b7d',
    PHP: '#4F5D95',
    Ruby: '#701516',
};

const langColor = languageColors[repo.language] || '#8b949e';
---

<section class="relative w-full h-[50vh] md:h-[65vh] min-h-[400px] overflow-hidden">
    <!-- Gradient overlays -->
    <div class="absolute inset-0 bg-gradient-to-r from-background via-background/85 to-background/40 z-10"></div>
    <div class="absolute bottom-0 left-0 right-0 h-32 bg-gradient-to-t from-background to-transparent z-10"></div>
    <div class="absolute top-0 left-0 right-0 h-20 bg-gradient-to-b from-background/50 to-transparent z-10"></div>

    <!-- Abstract background art based on language color -->
    <div class="absolute inset-0 opacity-15">
        <div class="absolute top-1/4 right-1/4 w-[500px] h-[500px] rounded-full blur-[120px]" style={`background-color: ${langColor}`}></div>
        <div class="absolute bottom-1/4 right-1/3 w-[300px] h-[300px] rounded-full blur-[100px] bg-primary/50"></div>
        <div class="absolute top-1/2 right-1/6 w-[200px] h-[200px] rounded-full blur-[80px] bg-secondary/40"></div>
    </div>

    <!-- Content -->
    <div class="relative z-20 h-full flex items-center px-8 md:px-16 max-w-5xl">
        <div class="animate-fade-in">
            <!-- Badge -->
            <span class="inline-flex items-center gap-2 px-3 py-1.5 text-xs font-semibold rounded-full bg-yellow-500/10 text-yellow-400 border border-yellow-500/20 mb-5">
                <Star size={12} />
                MOST STARRED REPOSITORY
            </span>

            <!-- Repo name -->
            <h1 class="text-4xl md:text-6xl lg:text-7xl font-bold text-white mb-4 tracking-tight leading-tight">
                {repo.name}
            </h1>

            <!-- Description -->
            <p class="text-base md:text-lg text-textMuted max-w-2xl mb-6 leading-relaxed">
                {repo.description}
            </p>

            <!-- Stats row -->
            <div class="flex flex-wrap items-center gap-5 mb-8 text-sm text-textMuted">
                <span class="flex items-center gap-1.5">
                    <Star size={14} className="text-yellow-500" />
                    <span class="text-white font-semibold">{repo.stars?.toLocaleString()}</span> stars
                </span>
                <span class="flex items-center gap-1.5">
                    <GitFork size={14} />
                    <span class="text-white font-semibold">{repo.forks}</span> forks
                </span>
                {repo.language && (
                    <span class="flex items-center gap-1.5">
                        <span class="w-3 h-3 rounded-full" style={`background-color: ${langColor}`}></span>
                        {repo.language}
                    </span>
                )}
                {repo.license && (
                    <span class="text-textMuted">{repo.license}</span>
                )}
            </div>

            <!-- CTA buttons -->
            <div class="flex flex-wrap gap-3">
                <a
                    href={repo.url}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-2 px-6 py-3 bg-white text-background font-semibold rounded-lg hover:bg-white/90 transition-colors text-sm"
                >
                    <ExternalLink size={16} />
                    View Repository
                </a>
                <a
                    href={`${repo.url}#readme`}
                    target="_blank"
                    rel="noopener noreferrer"
                    class="inline-flex items-center gap-2 px-6 py-3 bg-white/10 text-white border border-white/20 font-semibold rounded-lg hover:bg-white/20 transition-colors text-sm"
                >
                    <BookOpen size={16} />
                    Read More
                </a>
            </div>
        </div>
    </div>
</section>
